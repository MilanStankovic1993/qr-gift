<!doctype html>
<html lang="sr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‚ù§Ô∏è</title>

<style>
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:#fff;
    min-height:100vh;
    overflow-x:hidden;
    background:#0b0b10;
  }

  .hidden{ display:none !important; }

  /* Background image (blurovano) - vidi se dok je pitanje */
  .bg{
    position:fixed;
    inset:0;
    background-image:url("./photo.jpg");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    filter:brightness(0.92) blur(6px);
    transform:none;
    z-index:0;
  }

  .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.22);
    z-index:1;
  }

  /* Fullscreen video background (vidi se tek posle unlock) */
  .videoBg{
    position:fixed;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    z-index:0;
  }

  .videoOverlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.22);
    z-index:1;
  }

  /* UNLOCK SCREEN */
  .start{
    position:relative;
    min-height:100vh;
    display:grid;
    place-items:center;
    padding:18px;
    z-index:5;
  }

  .start .box{
    width:min(680px,100%);
    background:rgba(0,0,0,0.55);
    border:1px solid rgba(255,255,255,0.22);
    border-radius:22px;
    padding:20px 18px;
    text-align:center;
    box-shadow:0 18px 60px rgba(0,0,0,0.45);
  }

  h1{
    margin:0 0 10px;
    font-size:21px;
    letter-spacing:0.2px;
  }

  .start p{
    margin:0 0 14px;
    opacity:.95;
    line-height:1.45;
    font-size:15px;
  }

  .question{
    margin:10px 0 14px;
    font-size:16px;
    line-height:1.55;
    opacity:1;
  }

  input[type="text"]{
    width:min(360px, 92vw);
    padding:11px 12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.26);
    background:rgba(0,0,0,0.35);
    color:#fff;
    outline:none;
    font-size:16px;
    text-align:center;
  }

  input::placeholder{ color:rgba(255,255,255,0.65); }

  .err{
    margin-top:10px;
    font-size:13px;
    color:rgba(255,170,170,0.95);
    display:none;
  }

  button{
    border:none;
    cursor:pointer;
    border-radius:999px;
    padding:12px 16px;
    font-weight:800;
    font-size:16px;
  }

  .btn-primary{
    background:#fff;
    color:#000;
  }

  /* CONTENT after unlock (text over video) */
  .content{
    position:relative;
    min-height:100vh;
    display:grid;
    place-items:center;
    padding:28px 18px;
    z-index:5;
  }

  .textCard{
    width:min(860px,100%);
    background:rgba(0,0,0,0.28);
    border:1px solid rgba(255,255,255,0.22);
    border-radius:22px;
    padding:18px;
    text-align:left;
    line-height:1.65;
    font-size:16px;
    white-space:pre-wrap;
  }

  /* typewriter caret */
  .caret{
    display:inline-block;
    width:10px;
    margin-left:2px;
    opacity:.9;
    animation: blink 1s infinite;
  }
  @keyframes blink { 0%,50%{opacity:1} 51%,100%{opacity:0} }

  .hint{
    margin-top:10px;
    text-align:center;
    opacity:.75;
    font-size:12px;
  }
</style>
</head>

<body>

<!-- IMAGE BG (visible at start) -->
<div class="bg" id="imgBg"></div>
<div class="overlay" id="imgOv"></div>

<!-- VIDEO BG (hidden at start) -->
<video id="videoBg" class="videoBg hidden" autoplay muted loop playsinline preload="auto">
  <source src="./video.mp4" type="video/mp4" />
</video>
<div class="videoOverlay hidden" id="vidOv"></div>

<!-- MUSIC (starts only after unlock click) -->
<audio id="audio" loop preload="auto">
  <source src="./song.mp3" type="audio/mpeg"/>
</audio>

<!-- UNLOCK -->
<div class="start" id="start">
  <div class="box">
    <h1>Samo jedna osoba zna odgovor‚Ä¶ ‚ù§Ô∏è</h1>
    <p>Ako si to ti ‚Äî odgovori.</p>

    <div class="question">
      Najlepsi pogled sa terase na krovu ispred nas more a pored mene najlepsa devojka na svetu je bio u
    </div>

    <input id="answer" type="text" placeholder="upi≈°i odgovor‚Ä¶" autocomplete="off" />

    <div style="margin-top:14px;">
      <button class="btn-primary" id="unlockBtn">Otkrij poruku üîì</button>
    </div>

    <div class="err" id="err">Nije to üôÇ probaj opet.</div>
  </div>
</div>

<!-- CONTENT (hidden until unlock) -->
<div class="content hidden" id="content">
  <div class="textCard">
    <div id="message"></div><span class="caret" id="caret">|</span>
  </div>
  <div class="hint">‚ù§Ô∏è</div>
</div>

<script>
  const audio = document.getElementById('audio');

  const start = document.getElementById('start');
  const err = document.getElementById('err');
  const answer = document.getElementById('answer');
  const unlockBtn = document.getElementById('unlockBtn');

  const imgBg = document.getElementById('imgBg');
  const imgOv = document.getElementById('imgOv');

  const videoBg = document.getElementById('videoBg');
  const vidOv = document.getElementById('vidOv');

  const content = document.getElementById('content');
  const messageEl = document.getElementById('message');
  const caret = document.getElementById('caret');

  const FULL_TEXT =
`Lepoto, nemoj nikada da sumnja≈° u sebe ‚Äî i nemoj nikada da sumnja≈° da nisi voljena.
Malo nas je, ali te mnogo volimo. To je valjda smisao ≈æivota.

Nisam pored tebe, ali kad ti je te≈°ko i kad ti fali da te neko ponese preko ‚Äúblata‚Äù ‚Äî tu sam. Zauvek. ‚ù§Ô∏è`;

  function norm(s){
    return (s || '').toString().trim().toLowerCase().replace(/\s+/g,' ');
  }

  function typewriter(text, speedMs = 22){
    messageEl.textContent = '';
    caret.style.display = 'inline-block';

    let i = 0;
    const tick = () => {
      if(i >= text.length){
        caret.style.display = 'none';
        return;
      }
      messageEl.textContent += text[i];
      i++;
      setTimeout(tick, speedMs);
    };
    tick();
  }

  async function unlock(){
    const v = norm(answer.value);

    if(v !== 'kotoru'){
      err.style.display = 'block';
      start.animate(
        [{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],
        {duration:220}
      );
      return;
    }

    err.style.display = 'none';

    // hide question UI
    start.classList.add('hidden');

    // switch backgrounds: hide image, show video
    imgBg.classList.add('hidden');
    imgOv.classList.add('hidden');

    videoBg.classList.remove('hidden');
    vidOv.classList.remove('hidden');

    // show text content
    content.classList.remove('hidden');

    // ensure video plays silently
    videoBg.muted = true;
    try { await videoBg.play(); } catch(e) {}

    // start background music (allowed because button click)
    try { await audio.play(); } catch(e) {}

    // show message gradually
    typewriter(FULL_TEXT, 22);
  }

  unlockBtn.addEventListener('click', unlock);
  answer.addEventListener('keydown', (e) => { if(e.key === 'Enter') unlock(); });
</script>

</body>
</html>
