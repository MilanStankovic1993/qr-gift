<!doctype html>
<html lang="sr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‚ù§Ô∏è</title>

<style>
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:#fff;
    min-height:100vh;
    overflow-x:hidden;
    background:#0b0b10;
  }

  .hidden{ display:none !important; }

  /* Background (blurovano) - VIDI SE ODMAH */
  .bg{
    position:fixed;
    inset:0;
    background-image:url("./photo.jpg");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    filter:brightness(0.95) blur(7px);
    transform:scale(1.03);
  }

  .overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.20);
  }

  /* UNLOCK SCREEN - preko pozadine */
  .start{
    position:relative;
    min-height:100vh;
    display:grid;
    place-items:center;
    padding:18px;
    z-index:5; /* iznad pozadine */
  }

  .start .box{
    width:min(680px,100%);
    background:rgba(0,0,0,0.28);
    border:1px solid rgba(255,255,255,0.18);
    border-radius:20px;
    padding:18px;
    text-align:center;
  }

  h1{
    margin:0 0 8px;
    font-size:20px;
    letter-spacing:0.2px;
  }

  .start p{
    margin:0 0 12px;
    opacity:.92;
    line-height:1.45;
    font-size:15px;
  }

  .question{
    margin:10px 0 12px;
    font-size:15px;
    line-height:1.45;
    opacity:.95;
  }

  input[type="text"]{
    width:min(360px, 92vw);
    padding:10px 12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.22);
    background:rgba(0,0,0,0.25);
    color:#fff;
    outline:none;
    font-size:16px;
    text-align:center;
  }

  input::placeholder{ color:rgba(255,255,255,0.55); }

  .err{
    margin-top:10px;
    font-size:13px;
    color:rgba(255,170,170,0.95);
    display:none;
  }

  button{
    border:none;
    cursor:pointer;
    border-radius:999px;
    padding:12px 16px;
    font-weight:800;
    font-size:16px;
  }

  .btn-primary{
    background:#fff;
    color:#000;
  }

  .btn-ghost{
    background:transparent;
    color:#fff;
    border:1px solid rgba(255,255,255,0.5);
  }

  /* CONTENT (VIDEO + TEXT) - sakriven na startu */
  .wrap{
    position:relative;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px 18px;
    z-index:5;
  }

  .card{
    width:min(860px,100%);
    background:rgba(0,0,0,0.18);
    border:1px solid rgba(255,255,255,0.22);
    border-radius:22px;
    padding:18px;
    text-align:center;
  }

  .videoWrap{
    position:relative;
    border-radius:18px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.18);
    background:rgba(0,0,0,0.25);
  }

  video{
    width:100%;
    display:block;
  }

  /* TEKST PREKO VIDEA (prazan za sada) */
  .videoText{
    position:absolute;
    left:12px;
    right:12px;
    bottom:12px;
    text-align:left;
    padding:12px 14px;
    border-radius:14px;
    background:rgba(0,0,0,0.35);
    border:1px solid rgba(255,255,255,0.18);
    line-height:1.55;
    font-size:16px;
    white-space:pre-wrap;
  }

  .actions{
    display:flex;
    gap:12px;
    justify-content:center;
    margin-top:14px;
    flex-wrap:wrap;
  }
</style>
</head>

<body>

<!-- Pozadina se vidi ODMAH -->
<div class="bg"></div>
<div class="overlay"></div>

<!-- Pesma NE kreƒáe dok se ne otkljuƒça -->
<audio id="audio" loop preload="auto">
  <source src="./song.mp3" type="audio/mpeg"/>
</audio>

<!-- UNLOCK (vidljivo odmah) -->
<div class="start" id="start">
  <div class="box">
    <h1>Samo jedna osoba zna odgovor‚Ä¶ ‚ù§Ô∏è</h1>
    <p>Ako si to ti ‚Äî odgovori.</p>

    <div class="question">
      Najlepsi pogled sa terase na krovu ispred nas more a pored mene najlepsa devojka na svetu je bio u
    </div>

    <input id="answer" type="text" placeholder="upi≈°i odgovor‚Ä¶" autocomplete="off" />

    <div style="margin-top:14px;">
      <button class="btn-primary" id="unlockBtn">Otkrij poruku üîì</button>
    </div>

    <div class="err" id="err">Nije to üôÇ probaj opet.</div>
  </div>
</div>

<!-- CONTENT (sakriven dok ne pogodi) -->
<div class="wrap hidden" id="wrap">
  <div class="card">

    <div class="videoWrap">
      <video id="vid" controls playsinline>
        <source src="./video.mp4" type="video/mp4" />
      </video>

      <div class="videoText" id="message"></div>
    </div>

    <div class="actions">
      <button class="btn-primary" id="playPause">Pauza</button>
      <button class="btn-ghost" id="restart">Ponovo</button>
    </div>

  </div>
</div>

<script>
  const audio = document.getElementById('audio');

  const start = document.getElementById('start');
  const err = document.getElementById('err');
  const answer = document.getElementById('answer');
  const unlockBtn = document.getElementById('unlockBtn');

  const wrap = document.getElementById('wrap');

  const playPause = document.getElementById('playPause');
  const restart = document.getElementById('restart');

  function norm(s){
    return (s || '')
      .toString()
      .trim()
      .toLowerCase()
      .replace(/\s+/g,' ');
  }

  async function unlock(){
    const v = norm(answer.value);

    if(v !== 'kotoru'){
      err.style.display = 'block';
      start.animate(
        [{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],
        {duration:220}
      );
      return;
    }

    err.style.display = 'none';

    // sakrij pitanje
    start.classList.add('hidden');

    // prika≈æi video + tekst
    wrap.classList.remove('hidden');

    // pusti pesmu (dozvoljeno jer je klik)
    try { await audio.play(); } catch(e) {}
    playPause.textContent = 'Pauza';
  }

  unlockBtn.addEventListener('click', unlock);
  answer.addEventListener('keydown', (e) => { if(e.key === 'Enter') unlock(); });

  playPause.addEventListener('click', async () => {
    if(audio.paused){
      try { await audio.play(); } catch(e) {}
      playPause.textContent = 'Pauza';
    } else {
      audio.pause();
      playPause.textContent = 'Pusti';
    }
  });

  restart.addEventListener('click', async () => {
    audio.currentTime = 0;
    try { await audio.play(); } catch(e) {}
    playPause.textContent = 'Pauza';
  });
</script>

</body>
</html>
